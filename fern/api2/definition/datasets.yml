# yaml-language-server: $schema=https://raw.githubusercontent.com/fern-api/fern/main/fern.schema.json

services:
  http:
    DatasetsService:
      auth: true
      base-path: /datasets
      endpoints:
        getDatasets:
          display-name: Get Datasets
          path: ""
          method: GET
          docs: >-
            Get dataset details and associated field meta-data for any data-sets
            associated to your user.
          response: list<Dataset>

        createDataset:
          display-name: Create Dataset
          path: ""
          method: POST
          docs: >-
            Upload a dataset that you can use in your Humanloop projects to
            train models.
          request: CreateDatasetRequest
          response: UpdateDatasetResponse

        getDataset:
          display-name: Get Dataset
          path: /{id}
          path-parameters:
            id: integer
          method: GET
          docs: >-
            Get dataset details and associated field meta-data for a specific
            data-set associated to your user.
          request:
            name: GetDatasetRequest
            query-parameters:
              num_records: optional<integer>
          response: Dataset

        updateDataset:
          display-name: Update Dataset
          path: /{id}
          path-parameters:
            id: integer
          method: PUT
          docs: Update an existing dataset by adding additional data points.
          request: UpdateDatasetRequest
          response: UpdateDatasetResponse

        deleteDataset:
          display-name: Delete Dataset
          path: /{id}
          path-parameters:
            id: integer
          method: DELETE
          docs: Delete your dataset if it is no longer needed.

        updateDatasetDetails:
          display-name: Update Dataset Details
          docs: Update the details of your dataset such as its name and description.
          path: /{id}/metadata
          path-parameters:
            id: integer
          method: PUT
          request: UpdateDatasetDetailsRequest
          response: UpdateDatasetDetailsResponse

types:
  Dataset:
    properties:
      id: integer
      name: string
      count: integer
      data: optional<list<Data>>
      description: optional<string>
      public: optional<boolean>
      fields: optional<list<Field>>
      field_names: optional<list<string>>
      created_at: optional<string>
      updated_at: optional<string>
      status_counts: optional<map<string, integer>>
      active: boolean

  Field:
    properties:
      id: integer
      dataset_id: integer
      name: string
      display_name: string
      data_type: DataTypes
      required: boolean
      count: optional<integer>
      null_count: optional<integer>
      value_counts: optional<map<string, integer>>
      latest_counts_increase: optional<map<string, integer>>
      distinct_values: optional<list<string>>
      created_at: optional<string>
      updated_at: optional<string>

  DataTypes:
    enum:
      - text
      - categorical
      - multi_categorical
      - quantitative
      - character_offsets
      - url
      - ordinal_regression
      - file_pdf

  Data:
    properties:
      id: integer
      dataset_id: optional<integer>
      source: string
      created_at: optional<string>
      updated_at: optional<string>
      processing_status: DataProcessingStatus

  DataProcessingStatus:
    enum:
      - processing
      - completed
      - failed

  DataSetRequest:
    properties:
      name: string
      data: list<commons.DataRequest>
      fields: list<commons.FieldRequest>
      description: optional<string>

  UpdateDataSetRequest:
    properties:
      data: list<commons.DataRequest>

  DatasetMetadataUpdateRequest:
    properties:
      name: optional<string>
      description: optional<string>

  UpdateDatasetResponse:
    properties:
      id: integer
      attempted: integer
      succeeded: integer
      processing: integer
      msg: string
      fields: list<FieldResponse>